package com.akeysoft.elf.core;

import junit.framework.TestCase;

public class RunSecondsClockTomPittmanTestCase extends TestCase {
	private Cpu cpu;
	private Ram ram;
	private InputDevice inputDevice;
	private OutputDevice outputDevice;
	
	protected void setUp() throws Exception {
		inputDevice = new InputDevice();
		outputDevice = new OutputDevice();
		ram = new Ram(65536);
		
		cpu = new Cpu(ram, inputDevice, outputDevice);
	}

	public void testRun() throws UnknownOpcodeException {
		ram.setBytes(0, new byte[] {
				(byte) 0x90, (byte) 0xb1, (byte) 0xb2, (byte) 0xb3, (byte) 0xf8, (byte) 0x1b, (byte) 0xa1, (byte) 0xf8,
				(byte) 0xff, (byte) 0xa2, (byte) 0xf8, (byte) 0x0f, (byte) 0xa3, (byte) 0x70, (byte) 0x23, (byte) 0x69,
				(byte) 0x30, (byte) 0xac, (byte) 0x12, (byte) 0x42, (byte) 0xf6, (byte) 0x42, (byte) 0xb7, (byte) 0x42,
				(byte) 0xa7, (byte) 0x42, (byte) 0x70, (byte) 0xc4, (byte) 0x22, (byte) 0x78, (byte) 0x22, (byte) 0x73,
				(byte) 0x87, (byte) 0x73, (byte) 0x97, (byte) 0x73, (byte) 0x7e, (byte) 0x73, (byte) 0xf8, (byte) 0xc8,
				(byte) 0x34, (byte) 0x28, (byte) 0xa0, (byte) 0xa0, (byte) 0xb7, (byte) 0xf8, (byte) 0x0b, (byte) 0xa7,
				(byte) 0x97, (byte) 0xa0, (byte) 0x27, (byte) 0x97, (byte) 0xa0, (byte) 0xa0, (byte) 0x87, (byte) 0x3a,
				(byte) 0x32, (byte) 0x80, (byte) 0x3c, (byte) 0x2a, (byte) 0xa0, (byte) 0x34, (byte) 0x3c, (byte) 0x90,
				(byte) 0xb7, (byte) 0xf8, (byte) 0xc7, (byte) 0xa7, (byte) 0x07, (byte) 0xfc, (byte) 0x01, (byte) 0x57,
				(byte) 0xff, (byte) 0x3d, (byte) 0x3b, (byte) 0x12, (byte) 0xe7, (byte) 0x73, (byte) 0xf0, (byte) 0xfc,
				(byte) 0x03, (byte) 0x57, (byte) 0x3b, (byte) 0x69, (byte) 0xf8, (byte) 0xe2, (byte) 0x73, (byte) 0xf0,
				(byte) 0xfc, (byte) 0x03, (byte) 0x57, (byte) 0xfc, (byte) 0x0c, (byte) 0x3b, (byte) 0x62, (byte) 0xf8,
				(byte) 0xe2, (byte) 0x57, (byte) 0xf8, (byte) 0xc8, (byte) 0x30, (byte) 0x6b, (byte) 0xf8, (byte) 0xc6,
				(byte) 0xa7, (byte) 0xf8, (byte) 0xcc, (byte) 0xa0, (byte) 0x47, (byte) 0xfc, (byte) 0xac, (byte) 0xa7,
				(byte) 0x47, (byte) 0x52, (byte) 0xe2, (byte) 0xf0, (byte) 0xfe, (byte) 0x52, (byte) 0x75, (byte) 0x50,
				(byte) 0x10, (byte) 0x80, (byte) 0xfa, (byte) 0x03, (byte) 0x3a, (byte) 0x73, (byte) 0x10, (byte) 0x10,
				(byte) 0x10, (byte) 0x10, (byte) 0xf0, (byte) 0x3a, (byte) 0x73, (byte) 0x80, (byte) 0xff, (byte) 0xf8,
				(byte) 0x3b, (byte) 0x70, (byte) 0x32, (byte) 0x66, (byte) 0x30, (byte) 0x12, (byte) 0xda, (byte) 0xaa,
				(byte) 0xdf, (byte) 0xd9, (byte) 0xdd, (byte) 0x8f, (byte) 0x9e, (byte) 0xdb, (byte) 0x8f, (byte) 0x9e,
				(byte) 0xde, (byte) 0x9f, (byte) 0xea, (byte) 0xa8, (byte) 0xef, (byte) 0x8b, (byte) 0x9e, (byte) 0x9f,
				(byte) 0xcb, (byte) 0x9a, (byte) 0xdf, (byte) 0x8e, (byte) 0xdb, (byte) 0xbf, (byte) 0xda, (byte) 0xda,
				(byte) 0xdf, (byte) 0xda, (byte) 0xce, (byte) 0xdf, (byte) 0xe7, (byte) 0xa7, (byte) 0x3b, (byte) 0xb1,
				(byte) 0x17, (byte) 0x60, (byte) 0x7c, (byte) 0x01, (byte) 0x3a, (byte) 0xb1, (byte) 0xe2, (byte) 0x87,
				(byte) 0x22, (byte) 0x52, (byte) 0x64, (byte) 0x32, (byte) 0xbf, (byte) 0x3f, (byte) 0xbd, (byte) 0x37,
				(byte) 0xbf, (byte) 0x6c, (byte) 0xfe, (byte) 0x30, (byte) 0xac, (byte) 0xe2, (byte) 0xe2, (byte) 0x00
		});
		
		cpu.setStopAfterCycles(3000000L);
		cpu.reset();
		cpu.run();
	}
}
